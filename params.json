{"name":"Acis-component-examples","tagline":"Examples of ACIS Webservices Components","body":"<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\t<head>\r\n\t\t<meta charset=\"utf-8\">\r\n\t\t<title>ACIS examples, Average Annual Max Temp</title>\r\n\t\t<script type=\"text/javascript\" src=\"http://d3js.org/d3.v3.js\"></script>\r\n\t\t<style type=\"text/css\">\r\n\t\tbody {\r\n\t\t\tfont: 14px sans-serif;\r\n\t\t}\t\r\n\t\t.axis path,\r\n\t\t.axis line {\r\n\t\t\tfill: none;\r\n\t\t\tstroke: black;\r\n\t\t\tshape-rendering: crispEdges;\r\n\t\t}\r\n\r\n\t\t</style>\r\n\t</head>\r\n\t<body>\r\n\t\t<script src=\"../../build/build.js\"></script>\r\n\t\t<script type=\"text/javascript\">\r\n\t\t\tvar tooltip = d3.select(\"body\")\r\n\t\t\t\t.append(\"div\")\r\n\t\t\t\t.style(\"position\", \"absolute\")\r\n\t\t\t\t.style(\"z-index\", \"10\")\r\n\t\t\t\t.style(\"visibility\", \"hidden\")\r\n\t\t\t\t.style(\"padding\", \"2px\")\r\n\t\t\t\t.style(\"background\", \"lightgray\")\r\n\t\t\t\t.style(\"border-radius\", \"8px\")  \r\n\t\t\t\t.text(\"a simple tooltip\");\r\n\t\t\t\r\n\t\t\tvar request = require('superagent');\r\n\t\t\tvar holdingArray;\r\n\t\t\t\r\n\t\t\tvar params = {\r\n\t\t\t  \"sid\":\"304174\",\r\n                \"sdate\":\"por\",\"edate\":\"por\",\r\n                \"elems\":[{\"name\":\"maxt\",\"interval\":\"yly\",\"duration\":\"yly\",\"reduce\":\"mean\",\"maxmissing\":15}]\r\n              };\r\n\t\t\t  \r\n\t\t\tvar paramsmin = {\r\n\t\t\t  \"sid\":\"304174\",\r\n                \"sdate\":\"por\",\"edate\":\"por\",\r\n                \"elems\":[{\"name\":\"mint\",\"interval\":\"yly\",\"duration\":\"yly\",\"reduce\":\"mean\",\"maxmissing\":15}]\r\n              };\r\n\t\t\t\r\n\t\t\trequest\r\n\t\t\t\t.post('http://data.rcc-acis.org/StnData', params)\r\n\t\t\t\t.end(function(res){\r\n\t\t\t\t\tif (res.status == 200) {\r\n\t\t\t\t\t\tif (res.body.error === undefined) {\r\n\t\t\t\t\t\t\tvar myArray = res.body.data;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tfor(var i = myArray.length - 1; i >= 0; i--) {\r\n\t\t\t\t\t\t\t\tif(myArray[i][1] == 'M') {\r\n\t\t\t\t\t\t\t\t\tmyArray.splice(i, 1);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tholdingArray = myArray;\r\n\t\t\t\t\t\t\t//build_plot(myArray)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\telse console.log('invalid request %s', res.body.error)\r\n\t\t\t\t\t} \r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tconsole.log('failed request %s',res.status)\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\trequest\r\n\t\t\t\t.post('http://data.rcc-acis.org/StnData', paramsmin)\r\n\t\t\t\t.end(function(res){\r\n\t\t\t\t\tif (res.status == 200) {\r\n\t\t\t\t\t\tif (res.body.error === undefined) {\r\n\t\t\t\t\t\t\tvar myArray = res.body.data;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tfor(var i = myArray.length - 1; i >= 0; i--) {\r\n\t\t\t\t\t\t\t\tif(myArray[i][1] == 'M') {\r\n\t\t\t\t\t\t\t\t\tmyArray.splice(i, 1);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tnewArray = holdingArray.concat(myArray);\r\n\t\t\t\t\t\t\tbuild_plot(newArray)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\telse console.log('invalid request %s', res.body.error)\r\n\t\t\t\t\t} \r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tconsole.log('failed request %s',res.status)\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\tvar build_plot = function (dataset) {\t\r\n\t\t\tvar margin = {top: 20, right: 20, bottom: 30, left: 50},\r\n                width = 800 - margin.left - margin.right,\r\n                height = 300 - margin.top - margin.bottom;\r\n\t\t\t//Create scale functions\r\n\t\t\tvar parseDate = d3.time.format(\"%Y\").parse;\r\n\t\t\t\r\n\t\t\tvar xScale = d3.time.scale()\r\n\t\t\t\t\t\t.range([0, width]);\r\n\r\n\t\t\tvar yScale = d3.scale.linear()\r\n\t\t\t\t\t\t.range([height, 0]);\r\n\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t//Define X axis\r\n            var xAxis = d3.svg.axis()\r\n                .scale(xScale)\r\n                .ticks(5)\r\n                .orient(\"bottom\");\r\n\t\t\t\t\r\n\t\t\t//Define Y axis\r\n            var yAxis = d3.svg.axis()\r\n                .scale(yScale)\r\n                .orient(\"left\");\r\n\t\t\t\t\r\n\t\t\t// this function will be run every time we mouse over an element\r\n\t\t\tvar myMouseoverFunction = function() {\r\n\t\t\t\t// remember how d3 goes through EACH of the selected elements and uses your function for EACH element?\r\n\t\t\t\t// well, every time the function is used for an element, it has a \"secret\" variable called 'this' which holds that element.\r\n\t\t\t\t// we use 'this' to increment the current element's radius by 10\r\n\t\t\t\tvar circle = d3.select(this);\r\n\t\t\t\tcircle.transition().duration(200)\r\n\t\t\t\t\t//.attr(\"r\", circle.attr(\"r\") * 1 + 10 );\r\n\t\t\t\t\t.style(\"fill\", \"purple\");\r\n\t\t\t\t\t\r\n\t\t\t}\t\r\n\t\t\t//Create SVG element\r\n\t\t\tvar svg = d3.select(\"body\")\r\n\t\t\t\t.append(\"svg\")\r\n\t\t\t\t\t.attr(\"width\", width + margin.left + margin.right)\r\n\t\t\t\t\t.attr(\"height\", height + margin.top + margin.bottom)\r\n\t\t\t\t.append(\"g\")\r\n\t\t\t\t\t.attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\t\t\t\r\n\t\t\tdataset.forEach(function(d) {\r\n              d[0] = parseDate(d[0]);\r\n\t\t\t  d[1] == +d[1];\r\n            });\r\n\t\t\t\r\n\t\t\txScale.domain(d3.extent(dataset, function(d) { return d[0]; }));\r\n\t\t\tyScale.domain(d3.extent(dataset, function(d) { return d[1]; }));\r\n\t\t\t\t\t\t\r\n\t\t\tsvg.selectAll(\"circle\")\r\n\t\t\t   .data(dataset)\r\n\t\t\t   .enter()\r\n\t\t\t   .append(\"circle\")\r\n\t\t\t   .attr(\"cx\", function(d) {\r\n\t\t\t   \t\treturn xScale(d[0]);\r\n\t\t\t   })\r\n\t\t\t   .attr(\"cy\", function(d) {\r\n\t\t\t   \t\treturn yScale(d[1]);\r\n\t\t\t   })\r\n\t\t\t   .attr(\"r\", 3.5)\r\n\t\t\t   //.style(\"fill\",\"blue\")\r\n\t\t\t   .style(\"fill\", function(d){\r\n\t\t\t\t\tif (dataset.indexOf(d) >= (dataset.length / 2))\r\n\t\t\t\t\t\treturn \"mediumblue\"\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\treturn \"red\"})\r\n\t\t\t\t//.on(\"mouseover\", myMouseoverFunction);\r\n\t\t\t\t.on(\"mouseover\", function(d){\r\n\t\t\t\t\ttooltip.text(d[0].getFullYear() + \"  \" + d[1].toString())\r\n\t\t\t\t\treturn tooltip.style(\"visibility\", \"visible\");})\r\n\t\t\t\t.on(\"mousemove\", function(){return tooltip.style(\"top\", (event.pageY-10)+\"px\").style(\"left\",(event.pageX+10)+\"px\");})\r\n\t\t\t\t.on(\"mouseout\", function(){return tooltip.style(\"visibility\", \"hidden\");});\r\n\r\n\t\t\tsvg.append(\"g\")\r\n                .attr(\"class\", \"x axis\")\r\n                .attr(\"transform\", \"translate(0,\" + height + \")\")\r\n                .call(xAxis)\r\n\t\t\t\t.append(\"text\")\r\n\t\t\t\t.attr(\"dx\", 350)\r\n\t\t\t\t.attr(\"dy\", 30)\r\n\t\t\t\t.text(\"Year\");\r\n \r\n            svg.append(\"g\")\r\n                .attr(\"class\", \"y axis\")\r\n                .call(yAxis)\r\n\t\t\t\t.append(\"text\")\r\n                .attr(\"transform\", \"rotate(-90)\")\r\n                .attr(\"y\", 6)\r\n                .attr(\"dy\", -40)\r\n                .style(\"text-anchor\", \"end\")\r\n                .text(\"Annual Avg Min and Max Temperature\");\r\n\t\t\t}\r\n\t\t</script>\r\n\t</body>\r\n</html>","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}